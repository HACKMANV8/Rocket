{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/audio.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../charts/charts.component\";\nconst _c0 = [\"chatMessages\"];\nconst _c1 = [\"chatInput\"];\nfunction ChatComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ÉµÉµelement(2, \"span\")(3, \"span\")(4, \"span\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"span\");\n    i0.ÉµÉµtext(6, \"Analyzing mining data...\");\n    i0.ÉµÉµelementEnd()();\n  }\n}\nfunction ChatComponent_div_13_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 26)(1, \"h4\");\n    i0.ÉµÉµtext(2, \"\\uD83D\\uDCCA Key Performance Indicators\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 27)(4, \"div\", 28)(5, \"div\", 29);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"div\", 30);\n    i0.ÉµÉµtext(8, \"Critical Alerts\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(9, \"div\", 28)(10, \"div\", 29);\n    i0.ÉµÉµtext(11);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(12, \"div\", 30);\n    i0.ÉµÉµtext(13, \"Avg Efficiency\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(14, \"div\", 28)(15, \"div\", 29);\n    i0.ÉµÉµtext(16);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"div\", 30);\n    i0.ÉµÉµtext(18, \"Total Incidents\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(19, \"div\", 28)(20, \"div\", 29);\n    i0.ÉµÉµtext(21);\n    i0.ÉµÉµpipe(22, \"number\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(23, \"div\", 30);\n    i0.ÉµÉµtext(24, \"Monthly Production\");\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµclassProp(\"critical\", (message_r2.visualizations.kpis.critical_alerts || 0) > 0);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(message_r2.visualizations.kpis.critical_alerts || 0);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate1(\"\", message_r2.visualizations.kpis.avg_efficiency || 0, \"%\");\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(message_r2.visualizations.kpis.total_incidents || 0);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind1(22, 6, message_r2.visualizations.kpis.monthly_production || 0));\n  }\n}\nfunction ChatComponent_div_13_div_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 33)(1, \"h5\");\n    i0.ÉµÉµtext(2, \"Equipment Status Distribution\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelement(3, \"app-charts\", 34);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext(2).$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"data\", message_r2.visualizations.charts.equipment_status)(\"type\", \"doughnut\")(\"title\", \"Equipment Status\");\n  }\n}\nfunction ChatComponent_div_13_div_7_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 33)(1, \"h5\");\n    i0.ÉµÉµtext(2, \"Production Trend\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelement(3, \"app-charts\", 34);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext(2).$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"data\", message_r2.visualizations.charts.production_trend)(\"type\", \"line\")(\"title\", \"Production Over Time\");\n  }\n}\nfunction ChatComponent_div_13_div_7_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 33)(1, \"h5\");\n    i0.ÉµÉµtext(2, \"Incidents Trend\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelement(3, \"app-charts\", 34);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext(2).$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"data\", message_r2.visualizations.charts.incidents_trend)(\"type\", \"bar\")(\"title\", \"Incidents Over Time\");\n  }\n}\nfunction ChatComponent_div_13_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 31)(1, \"h4\");\n    i0.ÉµÉµtext(2, \"\\uD83D\\uDCC8 Data Visualizations\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(3, ChatComponent_div_13_div_7_div_3_Template, 4, 3, \"div\", 32)(4, ChatComponent_div_13_div_7_div_4_Template, 4, 3, \"div\", 32)(5, ChatComponent_div_13_div_7_div_5_Template, 4, 3, \"div\", 32);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.visualizations.charts.equipment_status == null ? null : message_r2.visualizations.charts.equipment_status.length);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.visualizations.charts.production_trend == null ? null : message_r2.visualizations.charts.production_trend.length);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.visualizations.charts.incidents_trend == null ? null : message_r2.visualizations.charts.incidents_trend.length);\n  }\n}\nfunction ChatComponent_div_13_div_8_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 38);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const rec_r3 = ctx.$implicit;\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", rec_r3, \" \");\n  }\n}\nfunction ChatComponent_div_13_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 35)(1, \"h4\");\n    i0.ÉµÉµtext(2, \"\\uD83D\\uDCA1 Recommendations\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 36);\n    i0.ÉµÉµtemplate(4, ChatComponent_div_13_div_8_div_4_Template, 2, 1, \"div\", 37);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngForOf\", message_r2.recommendations);\n  }\n}\nfunction ChatComponent_div_13_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 39);\n    i0.ÉµÉµlistener(\"click\", function ChatComponent_div_13_button_13_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r4);\n      const message_r2 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r4 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r4.playAudio(message_r2));\n    });\n    i0.ÉµÉµtext(1, \" \\uD83D\\uDD0A Play Audio \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ChatComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 16)(1, \"div\", 17);\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 18)(4, \"div\", 19);\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(6, ChatComponent_div_13_div_6_Template, 25, 8, \"div\", 20)(7, ChatComponent_div_13_div_7_Template, 6, 3, \"div\", 21)(8, ChatComponent_div_13_div_8_Template, 5, 1, \"div\", 22);\n    i0.ÉµÉµelementStart(9, \"div\", 23)(10, \"span\", 24);\n    i0.ÉµÉµtext(11);\n    i0.ÉµÉµpipe(12, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(13, ChatComponent_div_13_button_13_Template, 2, 0, \"button\", 25);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const message_r2 = ctx.$implicit;\n    const ctx_r4 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµclassProp(\"user-message\", message_r2.role === \"user\")(\"assistant-message\", message_r2.role === \"assistant\");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\" \", message_r2.role === \"user\" ? \"\\uD83D\\uDC64\" : \"\\uD83E\\uDD16\", \" \");\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(message_r2.content);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.visualizations == null ? null : message_r2.visualizations.kpis);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", (message_r2.visualizations == null ? null : message_r2.visualizations.charts) && ctx_r4.hasChartData(message_r2.visualizations.charts));\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.recommendations == null ? null : message_r2.recommendations.length);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind2(12, 11, message_r2.timestamp, \"shortTime\"));\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngIf\", message_r2.audio == null ? null : message_r2.audio.success);\n  }\n}\nexport class ChatComponent {\n  constructor(apiService, audioService) {\n    this.apiService = apiService;\n    this.audioService = audioService;\n    this.language = 'en';\n    this.messages = [];\n    this.userInput = '';\n    this.isLoading = false;\n    this.includeAudio = true;\n  }\n  ngOnInit() {\n    this.messages.push({\n      role: 'assistant',\n      content: 'Hello! I\\'m your Mining Intelligence Assistant. Ask me about equipment status, production efficiency, safety incidents, or get management recommendations.',\n      timestamp: new Date()\n    });\n    this.setupEventListeners();\n  }\n  setupEventListeners() {\n    window.addEventListener('suggestQuestion', event => {\n      this.userInput = event.detail;\n      this.sendMessage();\n    });\n  }\n  sendMessage() {\n    if (!this.userInput.trim() || this.isLoading) return;\n    const userMessage = {\n      role: 'user',\n      content: this.userInput,\n      timestamp: new Date()\n    };\n    this.messages.push(userMessage);\n    const query = this.userInput;\n    this.userInput = '';\n    this.isLoading = true;\n    // Use actual API call with your interface structure\n    this.apiService.sendQuery(query, this.language, this.includeAudio).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          const assistantMessage = {\n            role: 'assistant',\n            content: response.response.answer,\n            timestamp: new Date(),\n            visualizations: response.response.visualizations,\n            recommendations: response.response.recommendations,\n            audio: response.response.audio\n          };\n          this.messages.push(assistantMessage);\n          if (this.includeAudio && response.response.audio?.success) {\n            this.audioService.playAudio(response.response.audio.audio_base64);\n          }\n        } else {\n          this.messages.push({\n            role: 'assistant',\n            content: 'Sorry, I encountered an error. Please try again.',\n            timestamp: new Date()\n          });\n        }\n        this.scrollToBottom();\n      },\n      error: err => {\n        this.isLoading = false;\n        // Fallback: Show simulated response with sample data\n        const assistantMessage = {\n          role: 'assistant',\n          content: `I analyzed your query about \"${query}\". Here are the current mining operations insights:`,\n          timestamp: new Date(),\n          visualizations: {\n            kpis: {\n              total_incidents: 5,\n              critical_alerts: 2,\n              avg_efficiency: 87,\n              monthly_production: 12500\n            },\n            charts: {\n              equipment_status: [{\n                status: 'Operational',\n                count: 45\n              }, {\n                status: 'Maintenance',\n                count: 8\n              }, {\n                status: 'Critical',\n                count: 2\n              }],\n              production_trend: [{\n                month: 'Jan',\n                production: 12000\n              }, {\n                month: 'Feb',\n                production: 13500\n              }, {\n                month: 'Mar',\n                production: 12800\n              }]\n            }\n          },\n          recommendations: ['Schedule maintenance for equipment with >5000 operating hours', 'Review safety protocols for incident-prone areas', 'Optimize shift schedules to improve efficiency']\n        };\n        this.messages.push(assistantMessage);\n        this.scrollToBottom();\n      }\n    });\n  }\n  handleEnterEvent(event) {\n    if (!event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n  playAudio(message) {\n    if (message.audio?.success && message.audio.audio_base64) {\n      this.audioService.playAudio(message.audio.audio_base64);\n    }\n  }\n  clearChat() {\n    this.messages = [{\n      role: 'assistant',\n      content: 'Chat cleared. How can I help you with mining operations today?',\n      timestamp: new Date()\n    }];\n  }\n  scrollToBottom() {\n    setTimeout(() => {\n      if (this.chatMessages?.nativeElement) {\n        this.chatMessages.nativeElement.scrollTop = this.chatMessages.nativeElement.scrollHeight;\n      }\n    }, 100);\n  }\n  // Helper method to check if we have chart data\n  hasChartData(charts) {\n    return charts && (charts.equipment_status && charts.equipment_status.length > 0 || charts.production_trend && charts.production_trend.length > 0 || charts.incidents_trend && charts.incidents_trend.length > 0);\n  }\n  static {\n    this.Éµfac = function ChatComponent_Factory(t) {\n      return new (t || ChatComponent)(i0.ÉµÉµdirectiveInject(i1.ApiService), i0.ÉµÉµdirectiveInject(i2.AudioService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: ChatComponent,\n      selectors: [[\"app-chat\"]],\n      viewQuery: function ChatComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµviewQuery(_c0, 5);\n          i0.ÉµÉµviewQuery(_c1, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.chatMessages = _t.first);\n          i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.chatInput = _t.first);\n        }\n      },\n      inputs: {\n        language: \"language\"\n      },\n      decls: 20,\n      vars: 6,\n      consts: [[\"chatMessages\", \"\"], [\"chatInput\", \"\"], [1, \"chat-container\"], [1, \"chat-header\"], [1, \"chat-actions\"], [1, \"audio-toggle\"], [\"type\", \"checkbox\", 3, \"ngModelChange\", \"ngModel\"], [1, \"clear-btn\", 3, \"click\"], [1, \"chat-messages\"], [\"class\", \"loading-indicator\", 4, \"ngIf\"], [\"class\", \"message\", 3, \"user-message\", \"assistant-message\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-input-container\"], [\"placeholder\", \"Ask about equipment status, production metrics, safety incidents...\", \"rows\", \"3\", 1, \"chat-input\", 3, \"ngModelChange\", \"keydown.enter\", \"ngModel\"], [1, \"send-btn\", 3, \"click\", \"disabled\"], [1, \"loading-indicator\"], [1, \"typing-animation\"], [1, \"message\"], [1, \"message-avatar\"], [1, \"message-content\"], [1, \"message-text\"], [\"class\", \"embedded-kpis\", 4, \"ngIf\"], [\"class\", \"embedded-charts\", 4, \"ngIf\"], [\"class\", \"embedded-recommendations\", 4, \"ngIf\"], [1, \"message-footer\"], [1, \"message-time\"], [\"class\", \"audio-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"embedded-kpis\"], [1, \"kpi-grid\"], [1, \"kpi-card\"], [1, \"kpi-value\"], [1, \"kpi-label\"], [1, \"embedded-charts\"], [\"class\", \"chart-container\", 4, \"ngIf\"], [1, \"chart-container\"], [3, \"data\", \"type\", \"title\"], [1, \"embedded-recommendations\"], [1, \"recommendations-list\"], [\"class\", \"recommendation-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"recommendation-item\"], [1, \"audio-btn\", 3, \"click\"]],\n      template: function ChatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ÉµÉµgetCurrentView();\n          i0.ÉµÉµelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"h2\");\n          i0.ÉµÉµtext(3, \"\\uD83D\\uDCAC Mining AI Assistant\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(4, \"div\", 4)(5, \"label\", 5)(6, \"input\", 6);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_6_listener($event) {\n            i0.ÉµÉµrestoreView(_r1);\n            i0.ÉµÉµtwoWayBindingSet(ctx.includeAudio, $event) || (ctx.includeAudio = $event);\n            return i0.ÉµÉµresetView($event);\n          });\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtext(7, \" \\uD83D\\uDD0A Audio \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(8, \"button\", 7);\n          i0.ÉµÉµlistener(\"click\", function ChatComponent_Template_button_click_8_listener() {\n            i0.ÉµÉµrestoreView(_r1);\n            return i0.ÉµÉµresetView(ctx.clearChat());\n          });\n          i0.ÉµÉµtext(9, \"Clear Chat\");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(10, \"div\", 8, 0);\n          i0.ÉµÉµtemplate(12, ChatComponent_div_12_Template, 7, 0, \"div\", 9)(13, ChatComponent_div_13_Template, 14, 14, \"div\", 10);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(14, \"div\", 11)(15, \"textarea\", 12, 1);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ChatComponent_Template_textarea_ngModelChange_15_listener($event) {\n            i0.ÉµÉµrestoreView(_r1);\n            i0.ÉµÉµtwoWayBindingSet(ctx.userInput, $event) || (ctx.userInput = $event);\n            return i0.ÉµÉµresetView($event);\n          });\n          i0.ÉµÉµlistener(\"keydown.enter\", function ChatComponent_Template_textarea_keydown_enter_15_listener($event) {\n            i0.ÉµÉµrestoreView(_r1);\n            return i0.ÉµÉµresetView(ctx.handleEnterEvent($event));\n          });\n          i0.ÉµÉµtext(17, \"    \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(18, \"button\", 13);\n          i0.ÉµÉµlistener(\"click\", function ChatComponent_Template_button_click_18_listener() {\n            i0.ÉµÉµrestoreView(_r1);\n            return i0.ÉµÉµresetView(ctx.sendMessage());\n          });\n          i0.ÉµÉµtext(19);\n          i0.ÉµÉµelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(6);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.includeAudio);\n          i0.ÉµÉµadvance(6);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isLoading);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngForOf\", ctx.messages);\n          i0.ÉµÉµadvance(2);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.userInput);\n          i0.ÉµÉµadvance(3);\n          i0.ÉµÉµproperty(\"disabled\", !ctx.userInput.trim() || ctx.isLoading);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµtextInterpolate1(\" \", ctx.isLoading ? \"\\u23F3\" : \"\\uD83D\\uDCE4 Send\", \" \");\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgModel, i5.ChartsComponent, i3.DecimalPipe, i3.DatePipe],\n      styles: [\"\\n\\n.chat-container[_ngcontent-%COMP%] {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  background: rgba(255, 255, 255, 0.02);\\n}\\n\\n\\n\\n.chat-header[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.1);\\n  padding: 1rem;\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  margin: 0;\\n  font-size: 1.3rem;\\n}\\n\\n.chat-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1rem;\\n}\\n\\n.clear-btn[_ngcontent-%COMP%] {\\n  background: rgba(239, 68, 68, 0.2);\\n  border: 1px solid rgba(239, 68, 68, 0.3);\\n  color: #fca5a5;\\n  padding: 0.5rem 1rem;\\n  border-radius: 6px;\\n  cursor: pointer;\\n}\\n\\n\\n\\n.chat-messages[_ngcontent-%COMP%] {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 1rem;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 1rem;\\n}\\n\\n\\n\\n.message[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 0.75rem;\\n  max-width: 90%;\\n}\\n\\n.user-message[_ngcontent-%COMP%] {\\n  align-self: flex-end;\\n  flex-direction: row-reverse;\\n}\\n\\n.assistant-message[_ngcontent-%COMP%] {\\n  align-self: flex-start;\\n}\\n\\n.message-avatar[_ngcontent-%COMP%] {\\n  width: 35px;\\n  height: 35px;\\n  border-radius: 50%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 1rem;\\n  flex-shrink: 0;\\n}\\n\\n.user-message[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%] {\\n  background: #3b82f6;\\n}\\n\\n.assistant-message[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%] {\\n  background: #8b5cf6;\\n}\\n\\n.message-content[_ngcontent-%COMP%] {\\n  flex: 1;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n  border-radius: 12px;\\n  padding: 1rem;\\n}\\n\\n.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%] {\\n  background: rgba(59, 130, 246, 0.2);\\n  border-color: rgba(59, 130, 246, 0.3);\\n}\\n\\n.message-text[_ngcontent-%COMP%] {\\n  line-height: 1.5;\\n  margin-bottom: 0.75rem;\\n}\\n\\n\\n\\n.embedded-kpis[_ngcontent-%COMP%], .embedded-charts[_ngcontent-%COMP%], .embedded-recommendations[_ngcontent-%COMP%] {\\n  margin: 1rem 0;\\n  padding: 1rem;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n  border-radius: 8px;\\n}\\n\\n.kpi-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\\n  gap: 0.5rem;\\n}\\n\\n.kpi-card[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.08);\\n  padding: 0.75rem;\\n  border-radius: 6px;\\n  text-align: center;\\n}\\n\\n.kpi-value[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: 700;\\n  margin-bottom: 0.25rem;\\n}\\n\\n.kpi-label[_ngcontent-%COMP%] {\\n  font-size: 0.7rem;\\n  opacity: 0.8;\\n}\\n\\n\\n\\n.message-footer[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-top: 0.75rem;\\n  padding-top: 0.5rem;\\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\\n}\\n\\n.message-time[_ngcontent-%COMP%] {\\n  font-size: 0.7rem;\\n  opacity: 0.6;\\n}\\n\\n\\n\\n.loading-indicator[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 0.75rem;\\n  padding: 0.75rem;\\n  background: rgba(255, 255, 255, 0.05);\\n  border-radius: 8px;\\n  align-self: flex-start;\\n  max-width: 150px;\\n}\\n\\n\\n\\n.chat-input-container[_ngcontent-%COMP%] {\\n  padding: 1rem;\\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\\n  background: rgba(255, 255, 255, 0.05);\\n  display: flex;\\n  gap: 0.75rem;\\n  align-items: flex-end;\\n}\\n\\n.chat-input[_ngcontent-%COMP%] {\\n  flex: 1;\\n  background: rgba(255, 255, 255, 0.08);\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\n  border-radius: 8px;\\n  padding: 0.75rem;\\n  color: white;\\n  min-height: 50px;\\n  resize: none;\\n}\\n\\n.send-btn[_ngcontent-%COMP%] {\\n  background: #3b82f6;\\n  border: none;\\n  color: white;\\n  padding: 0.75rem 1rem;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  min-width: 50px;\\n}\\n\\n.send-btn[_ngcontent-%COMP%]:disabled {\\n  background: rgba(255, 255, 255, 0.1);\\n  cursor: not-allowed;\\n}\\n/*# sourceMappingURL=data:application/json;base64,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IENvbnRhaW5lciAqL1xyXG4uY2hhdC1jb250YWluZXIge1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjAyKTtcclxufVxyXG5cclxuLyogQ2hhdCBIZWFkZXIgKi9cclxuLmNoYXQtaGVhZGVyIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgcGFkZGluZzogMXJlbTtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LWhlYWRlciBoMiB7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xyXG59XHJcblxyXG4uY2hhdC1hY3Rpb25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZ2FwOiAxcmVtO1xyXG59XHJcblxyXG4uY2xlYXItYnRuIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDIzOSwgNjgsIDY4LCAwLjIpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjM5LCA2OCwgNjgsIDAuMyk7XHJcbiAgY29sb3I6ICNmY2E1YTU7XHJcbiAgcGFkZGluZzogMC41cmVtIDFyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLyogQ2hhdCBNZXNzYWdlcyAqL1xyXG4uY2hhdC1tZXNzYWdlcyB7XHJcbiAgZmxleDogMTtcclxuICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGdhcDogMXJlbTtcclxufVxyXG5cclxuLyogTWVzc2FnZSBTdHlsZXMgKi9cclxuLm1lc3NhZ2Uge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiAwLjc1cmVtO1xyXG4gIG1heC13aWR0aDogOTAlO1xyXG59XHJcblxyXG4udXNlci1tZXNzYWdlIHtcclxuICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuXHJcbi5hc3Npc3RhbnQtbWVzc2FnZSB7XHJcbiAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcclxufVxyXG5cclxuLm1lc3NhZ2UtYXZhdGFyIHtcclxuICB3aWR0aDogMzVweDtcclxuICBoZWlnaHQ6IDM1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBmb250LXNpemU6IDFyZW07XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbn1cclxuXHJcbi51c2VyLW1lc3NhZ2UgLm1lc3NhZ2UtYXZhdGFyIHtcclxuICBiYWNrZ3JvdW5kOiAjM2I4MmY2O1xyXG59XHJcblxyXG4uYXNzaXN0YW50LW1lc3NhZ2UgLm1lc3NhZ2UtYXZhdGFyIHtcclxuICBiYWNrZ3JvdW5kOiAjOGI1Y2Y2O1xyXG59XHJcblxyXG4ubWVzc2FnZS1jb250ZW50IHtcclxuICBmbGV4OiAxO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgcGFkZGluZzogMXJlbTtcclxufVxyXG5cclxuLnVzZXItbWVzc2FnZSAubWVzc2FnZS1jb250ZW50IHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4yKTtcclxuICBib3JkZXItY29sb3I6IHJnYmEoNTksIDEzMCwgMjQ2LCAwLjMpO1xyXG59XHJcblxyXG4ubWVzc2FnZS10ZXh0IHtcclxuICBsaW5lLWhlaWdodDogMS41O1xyXG4gIG1hcmdpbi1ib3R0b206IDAuNzVyZW07XHJcbn1cclxuXHJcbi8qIEVtYmVkZGVkIENvbXBvbmVudHMgKi9cclxuLmVtYmVkZGVkLWtwaXMsIC5lbWJlZGRlZC1jaGFydHMsIC5lbWJlZGRlZC1yZWNvbW1lbmRhdGlvbnMge1xyXG4gIG1hcmdpbjogMXJlbSAwO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTtcclxuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG59XHJcblxyXG4ua3BpLWdyaWQge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgxMDBweCwgMWZyKSk7XHJcbiAgZ2FwOiAwLjVyZW07XHJcbn1cclxuXHJcbi5rcGktY2FyZCB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA4KTtcclxuICBwYWRkaW5nOiAwLjc1cmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5rcGktdmFsdWUge1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcclxufVxyXG5cclxuLmtwaS1sYWJlbCB7XHJcbiAgZm9udC1zaXplOiAwLjdyZW07XHJcbiAgb3BhY2l0eTogMC44O1xyXG59XHJcblxyXG4vKiBNZXNzYWdlIEZvb3RlciAqL1xyXG4ubWVzc2FnZS1mb290ZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDogMC43NXJlbTtcclxuICBwYWRkaW5nLXRvcDogMC41cmVtO1xyXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbn1cclxuXHJcbi5tZXNzYWdlLXRpbWUge1xyXG4gIGZvbnQtc2l6ZTogMC43cmVtO1xyXG4gIG9wYWNpdHk6IDAuNjtcclxufVxyXG5cclxuLyogTG9hZGluZyAqL1xyXG4ubG9hZGluZy1pbmRpY2F0b3Ige1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDAuNzVyZW07XHJcbiAgcGFkZGluZzogMC43NXJlbTtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xyXG4gIG1heC13aWR0aDogMTUwcHg7XHJcbn1cclxuXHJcbi8qIENoYXQgSW5wdXQgKi9cclxuLmNoYXQtaW5wdXQtY29udGFpbmVyIHtcclxuICBwYWRkaW5nOiAxcmVtO1xyXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMC43NXJlbTtcclxuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XHJcbn1cclxuXHJcbi5jaGF0LWlucHV0IHtcclxuICBmbGV4OiAxO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBwYWRkaW5nOiAwLjc1cmVtO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtaW4taGVpZ2h0OiA1MHB4O1xyXG4gIHJlc2l6ZTogbm9uZTtcclxufVxyXG5cclxuLnNlbmQtYnRuIHtcclxuICBiYWNrZ3JvdW5kOiAjM2I4MmY2O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMC43NXJlbSAxcmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgbWluLXdpZHRoOiA1MHB4O1xyXG59XHJcblxyXG4uc2VuZC1idG46ZGlzYWJsZWQge1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGF0L2NoYXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQkFBbUI7QUFDbkI7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixxQ0FBcUM7QUFDdkM7O0FBRUEsZ0JBQWdCO0FBQ2hCO0VBQ0Usb0NBQW9DO0VBQ3BDLGFBQWE7RUFDYixpREFBaUQ7RUFDakQsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsd0NBQXdDO0VBQ3hDLGNBQWM7RUFDZCxvQkFBb0I7RUFDcEIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUEsa0JBQWtCO0FBQ2xCO0VBQ0UsT0FBTztFQUNQLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixTQUFTO0FBQ1g7O0FBRUEsbUJBQW1CO0FBQ25CO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixjQUFjO0FBQ2hCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsT0FBTztFQUNQLHFDQUFxQztFQUNyQywwQ0FBMEM7RUFDMUMsbUJBQW1CO0VBQ25CLGFBQWE7QUFDZjs7QUFFQTtFQUNFLG1DQUFtQztFQUNuQyxxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsc0JBQXNCO0FBQ3hCOztBQUVBLHdCQUF3QjtBQUN4QjtFQUNFLGNBQWM7RUFDZCxhQUFhO0VBQ2IscUNBQXFDO0VBQ3JDLDBDQUEwQztFQUMxQyxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsMkRBQTJEO0VBQzNELFdBQVc7QUFDYjs7QUFFQTtFQUNFLHFDQUFxQztFQUNyQyxnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLFlBQVk7QUFDZDs7QUFFQSxtQkFBbUI7QUFDbkI7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLDhDQUE4QztBQUNoRDs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixZQUFZO0FBQ2Q7O0FBRUEsWUFBWTtBQUNaO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLHFDQUFxQztFQUNyQyxrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGdCQUFnQjtBQUNsQjs7QUFFQSxlQUFlO0FBQ2Y7RUFDRSxhQUFhO0VBQ2IsOENBQThDO0VBQzlDLHFDQUFxQztFQUNyQyxhQUFhO0VBQ2IsWUFBWTtFQUNaLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLE9BQU87RUFDUCxxQ0FBcUM7RUFDckMsMENBQTBDO0VBQzFDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLG1CQUFtQjtBQUNyQjtBQUNBLG9tUEFBb21QIiwic291cmNlc0NvbnRlbnQiOlsiLyogQ2hhdCBDb250YWluZXIgKi9cclxuLmNoYXQtY29udGFpbmVyIHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wMik7XHJcbn1cclxuXHJcbi8qIENoYXQgSGVhZGVyICovXHJcbi5jaGF0LWhlYWRlciB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uY2hhdC1oZWFkZXIgaDIge1xyXG4gIG1hcmdpbjogMDtcclxuICBmb250LXNpemU6IDEuM3JlbTtcclxufVxyXG5cclxuLmNoYXQtYWN0aW9ucyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogMXJlbTtcclxufVxyXG5cclxuLmNsZWFyLWJ0biB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyMzksIDY4LCA2OCwgMC4yKTtcclxuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDIzOSwgNjgsIDY4LCAwLjMpO1xyXG4gIGNvbG9yOiAjZmNhNWE1O1xyXG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi8qIENoYXQgTWVzc2FnZXMgKi9cclxuLmNoYXQtbWVzc2FnZXMge1xyXG4gIGZsZXg6IDE7XHJcbiAgb3ZlcmZsb3cteTogYXV0bztcclxuICBwYWRkaW5nOiAxcmVtO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBnYXA6IDFyZW07XHJcbn1cclxuXHJcbi8qIE1lc3NhZ2UgU3R5bGVzICovXHJcbi5tZXNzYWdlIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMC43NXJlbTtcclxuICBtYXgtd2lkdGg6IDkwJTtcclxufVxyXG5cclxuLnVzZXItbWVzc2FnZSB7XHJcbiAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG59XHJcblxyXG4uYXNzaXN0YW50LW1lc3NhZ2Uge1xyXG4gIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XHJcbn1cclxuXHJcbi5tZXNzYWdlLWF2YXRhciB7XHJcbiAgd2lkdGg6IDM1cHg7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgZm9udC1zaXplOiAxcmVtO1xyXG4gIGZsZXgtc2hyaW5rOiAwO1xyXG59XHJcblxyXG4udXNlci1tZXNzYWdlIC5tZXNzYWdlLWF2YXRhciB7XHJcbiAgYmFja2dyb3VuZDogIzNiODJmNjtcclxufVxyXG5cclxuLmFzc2lzdGFudC1tZXNzYWdlIC5tZXNzYWdlLWF2YXRhciB7XHJcbiAgYmFja2dyb3VuZDogIzhiNWNmNjtcclxufVxyXG5cclxuLm1lc3NhZ2UtY29udGVudCB7XHJcbiAgZmxleDogMTtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcclxuICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuXHJcbi51c2VyLW1lc3NhZ2UgLm1lc3NhZ2UtY29udGVudCB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMik7XHJcbiAgYm9yZGVyLWNvbG9yOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKTtcclxufVxyXG5cclxuLm1lc3NhZ2UtdGV4dCB7XHJcbiAgbGluZS1oZWlnaHQ6IDEuNTtcclxuICBtYXJnaW4tYm90dG9tOiAwLjc1cmVtO1xyXG59XHJcblxyXG4vKiBFbWJlZGRlZCBDb21wb25lbnRzICovXHJcbi5lbWJlZGRlZC1rcGlzLCAuZW1iZWRkZWQtY2hhcnRzLCAuZW1iZWRkZWQtcmVjb21tZW5kYXRpb25zIHtcclxuICBtYXJnaW46IDFyZW0gMDtcclxuICBwYWRkaW5nOiAxcmVtO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxufVxyXG5cclxuLmtwaS1ncmlkIHtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMTAwcHgsIDFmcikpO1xyXG4gIGdhcDogMC41cmVtO1xyXG59XHJcblxyXG4ua3BpLWNhcmQge1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7XHJcbiAgcGFkZGluZzogMC43NXJlbTtcclxuICBib3JkZXItcmFkaXVzOiA2cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4ua3BpLXZhbHVlIHtcclxuICBmb250LXNpemU6IDEuMnJlbTtcclxuICBmb250LXdlaWdodDogNzAwO1xyXG4gIG1hcmdpbi1ib3R0b206IDAuMjVyZW07XHJcbn1cclxuXHJcbi5rcGktbGFiZWwge1xyXG4gIGZvbnQtc2l6ZTogMC43cmVtO1xyXG4gIG9wYWNpdHk6IDAuODtcclxufVxyXG5cclxuLyogTWVzc2FnZSBGb290ZXIgKi9cclxuLm1lc3NhZ2UtZm9vdGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDAuNzVyZW07XHJcbiAgcGFkZGluZy10b3A6IDAuNXJlbTtcclxuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG59XHJcblxyXG4ubWVzc2FnZS10aW1lIHtcclxuICBmb250LXNpemU6IDAuN3JlbTtcclxuICBvcGFjaXR5OiAwLjY7XHJcbn1cclxuXHJcbi8qIExvYWRpbmcgKi9cclxuLmxvYWRpbmctaW5kaWNhdG9yIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZ2FwOiAwLjc1cmVtO1xyXG4gIHBhZGRpbmc6IDAuNzVyZW07XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcclxuICBtYXgtd2lkdGg6IDE1MHB4O1xyXG59XHJcblxyXG4vKiBDaGF0IElucHV0ICovXHJcbi5jaGF0LWlucHV0LWNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMXJlbTtcclxuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBnYXA6IDAuNzVyZW07XHJcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xyXG59XHJcblxyXG4uY2hhdC1pbnB1dCB7XHJcbiAgZmxleDogMTtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgcGFkZGluZzogMC43NXJlbTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgbWluLWhlaWdodDogNTBweDtcclxuICByZXNpemU6IG5vbmU7XHJcbn1cclxuXHJcbi5zZW5kLWJ0biB7XHJcbiAgYmFja2dyb3VuZDogIzNiODJmNjtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDAuNzVyZW0gMXJlbTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIG1pbi13aWR0aDogNTBweDtcclxufVxyXG5cclxuLnNlbmQtYnRuOmRpc2FibGVkIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµelement","ÉµÉµelementEnd","ÉµÉµtext","ÉµÉµadvance","ÉµÉµclassProp","message_r2","visualizations","kpis","critical_alerts","ÉµÉµtextInterpolate","ÉµÉµtextInterpolate1","avg_efficiency","total_incidents","ÉµÉµpipeBind1","monthly_production","ÉµÉµproperty","charts","equipment_status","production_trend","incidents_trend","ÉµÉµtemplate","ChatComponent_div_13_div_7_div_3_Template","ChatComponent_div_13_div_7_div_4_Template","ChatComponent_div_13_div_7_div_5_Template","length","rec_r3","ChatComponent_div_13_div_8_div_4_Template","recommendations","ÉµÉµlistener","ChatComponent_div_13_button_13_Template_button_click_0_listener","ÉµÉµrestoreView","_r4","ÉµÉµnextContext","$implicit","ctx_r4","ÉµÉµresetView","playAudio","ChatComponent_div_13_div_6_Template","ChatComponent_div_13_div_7_Template","ChatComponent_div_13_div_8_Template","ChatComponent_div_13_button_13_Template","role","content","hasChartData","ÉµÉµpipeBind2","timestamp","audio","success","ChatComponent","constructor","apiService","audioService","language","messages","userInput","isLoading","includeAudio","ngOnInit","push","Date","setupEventListeners","window","addEventListener","event","detail","sendMessage","trim","userMessage","query","sendQuery","subscribe","next","response","assistantMessage","answer","audio_base64","scrollToBottom","error","err","status","count","month","production","handleEnterEvent","shiftKey","preventDefault","message","clearChat","setTimeout","chatMessages","nativeElement","scrollTop","scrollHeight","ÉµÉµdirectiveInject","i1","ApiService","i2","AudioService","selectors","viewQuery","ChatComponent_Query","rf","ctx","ÉµÉµtwoWayListener","ChatComponent_Template_input_ngModelChange_6_listener","$event","_r1","ÉµÉµtwoWayBindingSet","ChatComponent_Template_button_click_8_listener","ChatComponent_div_12_Template","ChatComponent_div_13_Template","ChatComponent_Template_textarea_ngModelChange_15_listener","ChatComponent_Template_textarea_keydown_enter_15_listener","ChatComponent_Template_button_click_18_listener","ÉµÉµtwoWayProperty"],"sources":["C:\\Users\\pavit\\OneDrive\\Desktop\\mit\\thanucheck\\bhooom\\frontend\\src\\app\\components\\chat\\chat.component.ts","C:\\Users\\pavit\\OneDrive\\Desktop\\mit\\thanucheck\\bhooom\\frontend\\src\\app\\components\\chat\\chat.component.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { ApiService } from '../../services/api.service';\r\nimport { AudioService } from '../../services/audio.service';\r\nimport { ChatMessage } from '../../models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.css']\r\n})\r\nexport class ChatComponent implements OnInit {\r\n  @Input() language: string = 'en';\r\n  @ViewChild('chatMessages') chatMessages!: ElementRef;\r\n  @ViewChild('chatInput') chatInput!: ElementRef;\r\n  \r\n  messages: ChatMessage[] = [];\r\n  userInput: string = '';\r\n  isLoading: boolean = false;\r\n  includeAudio: boolean = true;\r\n\r\n  constructor(\r\n    private apiService: ApiService, \r\n    private audioService: AudioService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.messages.push({\r\n      role: 'assistant',\r\n      content: 'Hello! I\\'m your Mining Intelligence Assistant. Ask me about equipment status, production efficiency, safety incidents, or get management recommendations.',\r\n      timestamp: new Date()\r\n    });\r\n\r\n    this.setupEventListeners();\r\n  }\r\n\r\n  setupEventListeners(): void {\r\n    window.addEventListener('suggestQuestion', (event: any) => {\r\n      this.userInput = event.detail;\r\n      this.sendMessage();\r\n    });\r\n  }\r\n\r\n  sendMessage(): void {\r\n    if (!this.userInput.trim() || this.isLoading) return;\r\n\r\n    const userMessage: ChatMessage = {\r\n      role: 'user',\r\n      content: this.userInput,\r\n      timestamp: new Date()\r\n    };\r\n    this.messages.push(userMessage);\r\n    const query = this.userInput;\r\n    this.userInput = '';\r\n    this.isLoading = true;\r\n\r\n    // Use actual API call with your interface structure\r\n    this.apiService.sendQuery(query, this.language, this.includeAudio).subscribe({\r\n      next: (response: any) => {\r\n        this.isLoading = false;\r\n        \r\n        if (response.success) {\r\n          const assistantMessage: ChatMessage = {\r\n            role: 'assistant',\r\n            content: response.response.answer,\r\n            timestamp: new Date(),\r\n            visualizations: response.response.visualizations,\r\n            recommendations: response.response.recommendations,\r\n            audio: response.response.audio\r\n          };\r\n          \r\n          this.messages.push(assistantMessage);\r\n\r\n          if (this.includeAudio && response.response.audio?.success) {\r\n            this.audioService.playAudio(response.response.audio.audio_base64!);\r\n          }\r\n        } else {\r\n          this.messages.push({\r\n            role: 'assistant',\r\n            content: 'Sorry, I encountered an error. Please try again.',\r\n            timestamp: new Date()\r\n          });\r\n        }\r\n        this.scrollToBottom();\r\n      },\r\n      error: (err: any) => {\r\n        this.isLoading = false;\r\n        \r\n        // Fallback: Show simulated response with sample data\r\n        const assistantMessage: ChatMessage = {\r\n          role: 'assistant',\r\n          content: `I analyzed your query about \"${query}\". Here are the current mining operations insights:`,\r\n          timestamp: new Date(),\r\n          visualizations: {\r\n            kpis: {\r\n              total_incidents: 5,\r\n              critical_alerts: 2,\r\n              avg_efficiency: 87,\r\n              monthly_production: 12500\r\n            },\r\n            charts: {\r\n              equipment_status: [\r\n                { status: 'Operational', count: 45 },\r\n                { status: 'Maintenance', count: 8 },\r\n                { status: 'Critical', count: 2 }\r\n              ],\r\n              production_trend: [\r\n                { month: 'Jan', production: 12000 },\r\n                { month: 'Feb', production: 13500 },\r\n                { month: 'Mar', production: 12800 }\r\n              ]\r\n            }\r\n          },\r\n          recommendations: [\r\n            'Schedule maintenance for equipment with >5000 operating hours',\r\n            'Review safety protocols for incident-prone areas',\r\n            'Optimize shift schedules to improve efficiency'\r\n          ]\r\n        };\r\n        \r\n        this.messages.push(assistantMessage);\r\n        this.scrollToBottom();\r\n      }\r\n    });\r\n  }\r\n\r\n  handleEnterEvent(event: KeyboardEvent): void {\r\n    if (!event.shiftKey) {\r\n      event.preventDefault();\r\n      this.sendMessage();\r\n    }\r\n  }\r\n\r\n  playAudio(message: ChatMessage): void {\r\n    if (message.audio?.success && message.audio.audio_base64) {\r\n      this.audioService.playAudio(message.audio.audio_base64);\r\n    }\r\n  }\r\n\r\n  clearChat(): void {\r\n    this.messages = [{\r\n      role: 'assistant',\r\n      content: 'Chat cleared. How can I help you with mining operations today?',\r\n      timestamp: new Date()\r\n    }];\r\n  }\r\n\r\n  scrollToBottom(): void {\r\n    setTimeout(() => {\r\n      if (this.chatMessages?.nativeElement) {\r\n        this.chatMessages.nativeElement.scrollTop = this.chatMessages.nativeElement.scrollHeight;\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  // Helper method to check if we have chart data\r\n  hasChartData(charts: any): boolean {\r\n    return charts && (\r\n      (charts.equipment_status && charts.equipment_status.length > 0) ||\r\n      (charts.production_trend && charts.production_trend.length > 0) ||\r\n      (charts.incidents_trend && charts.incidents_trend.length > 0)\r\n    );\r\n  }\r\n}","<div class=\"chat-container\">\r\n  <!-- Chat Header -->\r\n  <div class=\"chat-header\">\r\n    <h2>ðŸ’¬ Mining AI Assistant</h2>\r\n    <div class=\"chat-actions\">\r\n      <label class=\"audio-toggle\">\r\n        <input type=\"checkbox\" [(ngModel)]=\"includeAudio\"> ðŸ”Š Audio\r\n      </label>\r\n      <button class=\"clear-btn\" (click)=\"clearChat()\">Clear Chat</button>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Chat Messages -->\r\n  <div #chatMessages class=\"chat-messages\">\r\n    <!-- Loading Indicator -->\r\n    <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n      <div class=\"typing-animation\">\r\n        <span></span><span></span><span></span>\r\n      </div>\r\n      <span>Analyzing mining data...</span>\r\n    </div>\r\n\r\n    <!-- Messages -->\r\n    <div *ngFor=\"let message of messages\" \r\n         [class.user-message]=\"message.role === 'user'\"\r\n         [class.assistant-message]=\"message.role === 'assistant'\"\r\n         class=\"message\">\r\n      \r\n      <div class=\"message-avatar\">\r\n        {{ message.role === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–' }}\r\n      </div>\r\n      \r\n      <div class=\"message-content\">\r\n        <div class=\"message-text\">{{ message.content }}</div>\r\n        \r\n        <!-- Embedded KPIs -->\r\n        <div *ngIf=\"message.visualizations?.kpis\" class=\"embedded-kpis\">\r\n          <h4>ðŸ“Š Key Performance Indicators</h4>\r\n          <div class=\"kpi-grid\">\r\n            <div class=\"kpi-card\" [class.critical]=\"(message.visualizations.kpis.critical_alerts || 0) > 0\">\r\n              <div class=\"kpi-value\">{{ message.visualizations.kpis.critical_alerts || 0 }}</div>\r\n              <div class=\"kpi-label\">Critical Alerts</div>\r\n            </div>\r\n            <div class=\"kpi-card\">\r\n              <div class=\"kpi-value\">{{ message.visualizations.kpis.avg_efficiency || 0 }}%</div>\r\n              <div class=\"kpi-label\">Avg Efficiency</div>\r\n            </div>\r\n            <div class=\"kpi-card\">\r\n              <div class=\"kpi-value\">{{ message.visualizations.kpis.total_incidents || 0 }}</div>\r\n              <div class=\"kpi-label\">Total Incidents</div>\r\n            </div>\r\n            <div class=\"kpi-card\">\r\n              <div class=\"kpi-value\">{{ (message.visualizations.kpis.monthly_production || 0) | number }}</div>\r\n              <div class=\"kpi-label\">Monthly Production</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Embedded Charts -->\r\n        <div *ngIf=\"message.visualizations?.charts && hasChartData(message.visualizations.charts)\" class=\"embedded-charts\">\r\n          <h4>ðŸ“ˆ Data Visualizations</h4>\r\n          \r\n          <!-- Equipment Status Chart -->\r\n          <div *ngIf=\"message.visualizations.charts.equipment_status?.length\" class=\"chart-container\">\r\n            <h5>Equipment Status Distribution</h5>\r\n            <app-charts \r\n              [data]=\"message.visualizations.charts.equipment_status\"\r\n              [type]=\"'doughnut'\"\r\n              [title]=\"'Equipment Status'\">\r\n            </app-charts>\r\n          </div>\r\n\r\n          <!-- Production Trend Chart -->\r\n          <div *ngIf=\"message.visualizations.charts.production_trend?.length\" class=\"chart-container\">\r\n            <h5>Production Trend</h5>\r\n            <app-charts \r\n              [data]=\"message.visualizations.charts.production_trend\"\r\n              [type]=\"'line'\"\r\n              [title]=\"'Production Over Time'\">\r\n            </app-charts>\r\n          </div>\r\n\r\n          <!-- Incidents Trend Chart -->\r\n          <div *ngIf=\"message.visualizations.charts.incidents_trend?.length\" class=\"chart-container\">\r\n            <h5>Incidents Trend</h5>\r\n            <app-charts \r\n              [data]=\"message.visualizations.charts.incidents_trend\"\r\n              [type]=\"'bar'\"\r\n              [title]=\"'Incidents Over Time'\">\r\n            </app-charts>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Embedded Recommendations -->\r\n        <div *ngIf=\"message.recommendations?.length\" class=\"embedded-recommendations\">\r\n          <h4>ðŸ’¡ Recommendations</h4>\r\n          <div class=\"recommendations-list\">\r\n            <div *ngFor=\"let rec of message.recommendations\" class=\"recommendation-item\">\r\n              {{ rec }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Message Footer -->\r\n        <div class=\"message-footer\">\r\n          <span class=\"message-time\">{{ message.timestamp | date:'shortTime' }}</span>\r\n          <button *ngIf=\"message.audio?.success\" class=\"audio-btn\" (click)=\"playAudio(message)\">\r\n            ðŸ”Š Play Audio\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Chat Input -->\r\n  <div class=\"chat-input-container\">\r\n    <textarea \r\n      #chatInput\r\n      [(ngModel)]=\"userInput\"\r\n      (keydown.enter)=\"handleEnterEvent($event)\"\r\n      placeholder=\"Ask about equipment status, production metrics, safety incidents...\"\r\n      class=\"chat-input\"\r\n      rows=\"3\">\r\n    </textarea>\r\n    <button \r\n      (click)=\"sendMessage()\" \r\n      [disabled]=\"!userInput.trim() || isLoading\"\r\n      class=\"send-btn\">\r\n      {{ isLoading ? 'â³' : 'ðŸ“¤ Send' }}\r\n    </button>\r\n  </div>\r\n</div>"],"mappings":";;;;;;;;;;ICgBMA,EADF,CAAAC,cAAA,cAAiD,cACjB;IACFD,EAA1B,CAAAE,SAAA,WAAa,WAAa,WAAa;IACzCF,EAAA,CAAAG,YAAA,EAAM;IACNH,EAAA,CAAAC,cAAA,WAAM;IAAAD,EAAA,CAAAI,MAAA,+BAAwB;IAChCJ,EADgC,CAAAG,YAAA,EAAO,EACjC;;;;;IAiBAH,EADF,CAAAC,cAAA,cAAgE,SAC1D;IAAAD,EAAA,CAAAI,MAAA,8CAA6B;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IAGlCH,EAFJ,CAAAC,cAAA,cAAsB,cAC4E,cACvE;IAAAD,EAAA,CAAAI,MAAA,GAAsD;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IACnFH,EAAA,CAAAC,cAAA,cAAuB;IAAAD,EAAA,CAAAI,MAAA,sBAAe;IACxCJ,EADwC,CAAAG,YAAA,EAAM,EACxC;IAEJH,EADF,CAAAC,cAAA,cAAsB,eACG;IAAAD,EAAA,CAAAI,MAAA,IAAsD;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IACnFH,EAAA,CAAAC,cAAA,eAAuB;IAAAD,EAAA,CAAAI,MAAA,sBAAc;IACvCJ,EADuC,CAAAG,YAAA,EAAM,EACvC;IAEJH,EADF,CAAAC,cAAA,eAAsB,eACG;IAAAD,EAAA,CAAAI,MAAA,IAAsD;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IACnFH,EAAA,CAAAC,cAAA,eAAuB;IAAAD,EAAA,CAAAI,MAAA,uBAAe;IACxCJ,EADwC,CAAAG,YAAA,EAAM,EACxC;IAEJH,EADF,CAAAC,cAAA,eAAsB,eACG;IAAAD,EAAA,CAAAI,MAAA,IAAoE;;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IACjGH,EAAA,CAAAC,cAAA,eAAuB;IAAAD,EAAA,CAAAI,MAAA,0BAAkB;IAG/CJ,EAH+C,CAAAG,YAAA,EAAM,EAC3C,EACF,EACF;;;;IAjBoBH,EAAA,CAAAK,SAAA,GAAyE;IAAzEL,EAAA,CAAAM,WAAA,cAAAC,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAC,eAAA,WAAyE;IACtEV,EAAA,CAAAK,SAAA,GAAsD;IAAtDL,EAAA,CAAAW,iBAAA,CAAAJ,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAC,eAAA,MAAsD;IAItDV,EAAA,CAAAK,SAAA,GAAsD;IAAtDL,EAAA,CAAAY,kBAAA,KAAAL,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAI,cAAA,WAAsD;IAItDb,EAAA,CAAAK,SAAA,GAAsD;IAAtDL,EAAA,CAAAW,iBAAA,CAAAJ,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAK,eAAA,MAAsD;IAItDd,EAAA,CAAAK,SAAA,GAAoE;IAApEL,EAAA,CAAAW,iBAAA,CAAAX,EAAA,CAAAe,WAAA,QAAAR,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAO,kBAAA,OAAoE;;;;;IAY7FhB,EADF,CAAAC,cAAA,cAA4F,SACtF;IAAAD,EAAA,CAAAI,MAAA,oCAA6B;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IACtCH,EAAA,CAAAE,SAAA,qBAIa;IACfF,EAAA,CAAAG,YAAA,EAAM;;;;IAJFH,EAAA,CAAAK,SAAA,GAAuD;IAEvDL,EAFA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAC,gBAAA,CAAuD,oBACpC,6BACS;;;;;IAM9BnB,EADF,CAAAC,cAAA,cAA4F,SACtF;IAAAD,EAAA,CAAAI,MAAA,uBAAgB;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IACzBH,EAAA,CAAAE,SAAA,qBAIa;IACfF,EAAA,CAAAG,YAAA,EAAM;;;;IAJFH,EAAA,CAAAK,SAAA,GAAuD;IAEvDL,EAFA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAE,gBAAA,CAAuD,gBACxC,iCACiB;;;;;IAMlCpB,EADF,CAAAC,cAAA,cAA2F,SACrF;IAAAD,EAAA,CAAAI,MAAA,sBAAe;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IACxBH,EAAA,CAAAE,SAAA,qBAIa;IACfF,EAAA,CAAAG,YAAA,EAAM;;;;IAJFH,EAAA,CAAAK,SAAA,GAAsD;IAEtDL,EAFA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAG,eAAA,CAAsD,eACxC,gCACiB;;;;;IA5BnCrB,EADF,CAAAC,cAAA,cAAmH,SAC7G;IAAAD,EAAA,CAAAI,MAAA,uCAAsB;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IAuB/BH,EApBA,CAAAsB,UAAA,IAAAC,yCAAA,kBAA4F,IAAAC,yCAAA,kBAUA,IAAAC,yCAAA,kBAUD;IAQ7FzB,EAAA,CAAAG,YAAA,EAAM;;;;IA5BEH,EAAA,CAAAK,SAAA,GAA4D;IAA5DL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAC,gBAAA,kBAAAZ,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAC,gBAAA,CAAAO,MAAA,CAA4D;IAU5D1B,EAAA,CAAAK,SAAA,EAA4D;IAA5DL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAE,gBAAA,kBAAAb,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAE,gBAAA,CAAAM,MAAA,CAA4D;IAU5D1B,EAAA,CAAAK,SAAA,EAA2D;IAA3DL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAG,eAAA,kBAAAd,UAAA,CAAAC,cAAA,CAAAU,MAAA,CAAAG,eAAA,CAAAK,MAAA,CAA2D;;;;;IAc/D1B,EAAA,CAAAC,cAAA,cAA6E;IAC3ED,EAAA,CAAAI,MAAA,GACF;IAAAJ,EAAA,CAAAG,YAAA,EAAM;;;;IADJH,EAAA,CAAAK,SAAA,EACF;IADEL,EAAA,CAAAY,kBAAA,MAAAe,MAAA,MACF;;;;;IAJF3B,EADF,CAAAC,cAAA,cAA8E,SACxE;IAAAD,EAAA,CAAAI,MAAA,mCAAkB;IAAAJ,EAAA,CAAAG,YAAA,EAAK;IAC3BH,EAAA,CAAAC,cAAA,cAAkC;IAChCD,EAAA,CAAAsB,UAAA,IAAAM,yCAAA,kBAA6E;IAIjF5B,EADE,CAAAG,YAAA,EAAM,EACF;;;;IAJmBH,EAAA,CAAAK,SAAA,GAA0B;IAA1BL,EAAA,CAAAiB,UAAA,YAAAV,UAAA,CAAAsB,eAAA,CAA0B;;;;;;IASjD7B,EAAA,CAAAC,cAAA,iBAAsF;IAA7BD,EAAA,CAAA8B,UAAA,mBAAAC,gEAAA;MAAA/B,EAAA,CAAAgC,aAAA,CAAAC,GAAA;MAAA,MAAA1B,UAAA,GAAAP,EAAA,CAAAkC,aAAA,GAAAC,SAAA;MAAA,MAAAC,MAAA,GAAApC,EAAA,CAAAkC,aAAA;MAAA,OAAAlC,EAAA,CAAAqC,WAAA,CAASD,MAAA,CAAAE,SAAA,CAAA/B,UAAA,CAAkB;IAAA,EAAC;IACnFP,EAAA,CAAAI,MAAA,gCACF;IAAAJ,EAAA,CAAAG,YAAA,EAAS;;;;;IAhFbH,EALF,CAAAC,cAAA,cAGqB,cAES;IAC1BD,EAAA,CAAAI,MAAA,GACF;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IAGJH,EADF,CAAAC,cAAA,cAA6B,cACD;IAAAD,EAAA,CAAAI,MAAA,GAAqB;IAAAJ,EAAA,CAAAG,YAAA,EAAM;IA6DrDH,EA1DA,CAAAsB,UAAA,IAAAiB,mCAAA,mBAAgE,IAAAC,mCAAA,kBAuBmD,IAAAC,mCAAA,kBAmCrC;IAW5EzC,EADF,CAAAC,cAAA,cAA4B,gBACC;IAAAD,EAAA,CAAAI,MAAA,IAA0C;;IAAAJ,EAAA,CAAAG,YAAA,EAAO;IAC5EH,EAAA,CAAAsB,UAAA,KAAAoB,uCAAA,qBAAsF;IAK5F1C,EAFI,CAAAG,YAAA,EAAM,EACF,EACF;;;;;IAtFDH,EADA,CAAAM,WAAA,iBAAAC,UAAA,CAAAoC,IAAA,YAA8C,sBAAApC,UAAA,CAAAoC,IAAA,iBACU;IAIzD3C,EAAA,CAAAK,SAAA,GACF;IADEL,EAAA,CAAAY,kBAAA,MAAAL,UAAA,CAAAoC,IAAA,mDACF;IAG4B3C,EAAA,CAAAK,SAAA,GAAqB;IAArBL,EAAA,CAAAW,iBAAA,CAAAJ,UAAA,CAAAqC,OAAA,CAAqB;IAGzC5C,EAAA,CAAAK,SAAA,EAAkC;IAAlCL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAC,cAAA,kBAAAD,UAAA,CAAAC,cAAA,CAAAC,IAAA,CAAkC;IAuBlCT,EAAA,CAAAK,SAAA,EAAmF;IAAnFL,EAAA,CAAAiB,UAAA,UAAAV,UAAA,CAAAC,cAAA,kBAAAD,UAAA,CAAAC,cAAA,CAAAU,MAAA,KAAAkB,MAAA,CAAAS,YAAA,CAAAtC,UAAA,CAAAC,cAAA,CAAAU,MAAA,EAAmF;IAmCnFlB,EAAA,CAAAK,SAAA,EAAqC;IAArCL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAsB,eAAA,kBAAAtB,UAAA,CAAAsB,eAAA,CAAAH,MAAA,CAAqC;IAWd1B,EAAA,CAAAK,SAAA,GAA0C;IAA1CL,EAAA,CAAAW,iBAAA,CAAAX,EAAA,CAAA8C,WAAA,SAAAvC,UAAA,CAAAwC,SAAA,eAA0C;IAC5D/C,EAAA,CAAAK,SAAA,GAA4B;IAA5BL,EAAA,CAAAiB,UAAA,SAAAV,UAAA,CAAAyC,KAAA,kBAAAzC,UAAA,CAAAyC,KAAA,CAAAC,OAAA,CAA4B;;;ADhG/C,OAAM,MAAOC,aAAa;EAUxBC,YACUC,UAAsB,EACtBC,YAA0B;IAD1B,KAAAD,UAAU,GAAVA,UAAU;IACV,KAAAC,YAAY,GAAZA,YAAY;IAXb,KAAAC,QAAQ,GAAW,IAAI;IAIhC,KAAAC,QAAQ,GAAkB,EAAE;IAC5B,KAAAC,SAAS,GAAW,EAAE;IACtB,KAAAC,SAAS,GAAY,KAAK;IAC1B,KAAAC,YAAY,GAAY,IAAI;EAKzB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAAC;MACjBjB,IAAI,EAAE,WAAW;MACjBC,OAAO,EAAE,4JAA4J;MACrKG,SAAS,EAAE,IAAIc,IAAI;KACpB,CAAC;IAEF,IAAI,CAACC,mBAAmB,EAAE;EAC5B;EAEAA,mBAAmBA,CAAA;IACjBC,MAAM,CAACC,gBAAgB,CAAC,iBAAiB,EAAGC,KAAU,IAAI;MACxD,IAAI,CAACT,SAAS,GAAGS,KAAK,CAACC,MAAM;MAC7B,IAAI,CAACC,WAAW,EAAE;IACpB,CAAC,CAAC;EACJ;EAEAA,WAAWA,CAAA;IACT,IAAI,CAAC,IAAI,CAACX,SAAS,CAACY,IAAI,EAAE,IAAI,IAAI,CAACX,SAAS,EAAE;IAE9C,MAAMY,WAAW,GAAgB;MAC/B1B,IAAI,EAAE,MAAM;MACZC,OAAO,EAAE,IAAI,CAACY,SAAS;MACvBT,SAAS,EAAE,IAAIc,IAAI;KACpB;IACD,IAAI,CAACN,QAAQ,CAACK,IAAI,CAACS,WAAW,CAAC;IAC/B,MAAMC,KAAK,GAAG,IAAI,CAACd,SAAS;IAC5B,IAAI,CAACA,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB;IACA,IAAI,CAACL,UAAU,CAACmB,SAAS,CAACD,KAAK,EAAE,IAAI,CAAChB,QAAQ,EAAE,IAAI,CAACI,YAAY,CAAC,CAACc,SAAS,CAAC;MAC3EC,IAAI,EAAGC,QAAa,IAAI;QACtB,IAAI,CAACjB,SAAS,GAAG,KAAK;QAEtB,IAAIiB,QAAQ,CAACzB,OAAO,EAAE;UACpB,MAAM0B,gBAAgB,GAAgB;YACpChC,IAAI,EAAE,WAAW;YACjBC,OAAO,EAAE8B,QAAQ,CAACA,QAAQ,CAACE,MAAM;YACjC7B,SAAS,EAAE,IAAIc,IAAI,EAAE;YACrBrD,cAAc,EAAEkE,QAAQ,CAACA,QAAQ,CAAClE,cAAc;YAChDqB,eAAe,EAAE6C,QAAQ,CAACA,QAAQ,CAAC7C,eAAe;YAClDmB,KAAK,EAAE0B,QAAQ,CAACA,QAAQ,CAAC1B;WAC1B;UAED,IAAI,CAACO,QAAQ,CAACK,IAAI,CAACe,gBAAgB,CAAC;UAEpC,IAAI,IAAI,CAACjB,YAAY,IAAIgB,QAAQ,CAACA,QAAQ,CAAC1B,KAAK,EAAEC,OAAO,EAAE;YACzD,IAAI,CAACI,YAAY,CAACf,SAAS,CAACoC,QAAQ,CAACA,QAAQ,CAAC1B,KAAK,CAAC6B,YAAa,CAAC;;SAErE,MAAM;UACL,IAAI,CAACtB,QAAQ,CAACK,IAAI,CAAC;YACjBjB,IAAI,EAAE,WAAW;YACjBC,OAAO,EAAE,kDAAkD;YAC3DG,SAAS,EAAE,IAAIc,IAAI;WACpB,CAAC;;QAEJ,IAAI,CAACiB,cAAc,EAAE;MACvB,CAAC;MACDC,KAAK,EAAGC,GAAQ,IAAI;QAClB,IAAI,CAACvB,SAAS,GAAG,KAAK;QAEtB;QACA,MAAMkB,gBAAgB,GAAgB;UACpChC,IAAI,EAAE,WAAW;UACjBC,OAAO,EAAE,gCAAgC0B,KAAK,qDAAqD;UACnGvB,SAAS,EAAE,IAAIc,IAAI,EAAE;UACrBrD,cAAc,EAAE;YACdC,IAAI,EAAE;cACJK,eAAe,EAAE,CAAC;cAClBJ,eAAe,EAAE,CAAC;cAClBG,cAAc,EAAE,EAAE;cAClBG,kBAAkB,EAAE;aACrB;YACDE,MAAM,EAAE;cACNC,gBAAgB,EAAE,CAChB;gBAAE8D,MAAM,EAAE,aAAa;gBAAEC,KAAK,EAAE;cAAE,CAAE,EACpC;gBAAED,MAAM,EAAE,aAAa;gBAAEC,KAAK,EAAE;cAAC,CAAE,EACnC;gBAAED,MAAM,EAAE,UAAU;gBAAEC,KAAK,EAAE;cAAC,CAAE,CACjC;cACD9D,gBAAgB,EAAE,CAChB;gBAAE+D,KAAK,EAAE,KAAK;gBAAEC,UAAU,EAAE;cAAK,CAAE,EACnC;gBAAED,KAAK,EAAE,KAAK;gBAAEC,UAAU,EAAE;cAAK,CAAE,EACnC;gBAAED,KAAK,EAAE,KAAK;gBAAEC,UAAU,EAAE;cAAK,CAAE;;WAGxC;UACDvD,eAAe,EAAE,CACf,+DAA+D,EAC/D,kDAAkD,EAClD,gDAAgD;SAEnD;QAED,IAAI,CAAC0B,QAAQ,CAACK,IAAI,CAACe,gBAAgB,CAAC;QACpC,IAAI,CAACG,cAAc,EAAE;MACvB;KACD,CAAC;EACJ;EAEAO,gBAAgBA,CAACpB,KAAoB;IACnC,IAAI,CAACA,KAAK,CAACqB,QAAQ,EAAE;MACnBrB,KAAK,CAACsB,cAAc,EAAE;MACtB,IAAI,CAACpB,WAAW,EAAE;;EAEtB;EAEA7B,SAASA,CAACkD,OAAoB;IAC5B,IAAIA,OAAO,CAACxC,KAAK,EAAEC,OAAO,IAAIuC,OAAO,CAACxC,KAAK,CAAC6B,YAAY,EAAE;MACxD,IAAI,CAACxB,YAAY,CAACf,SAAS,CAACkD,OAAO,CAACxC,KAAK,CAAC6B,YAAY,CAAC;;EAE3D;EAEAY,SAASA,CAAA;IACP,IAAI,CAAClC,QAAQ,GAAG,CAAC;MACfZ,IAAI,EAAE,WAAW;MACjBC,OAAO,EAAE,gEAAgE;MACzEG,SAAS,EAAE,IAAIc,IAAI;KACpB,CAAC;EACJ;EAEAiB,cAAcA,CAAA;IACZY,UAAU,CAAC,MAAK;MACd,IAAI,IAAI,CAACC,YAAY,EAAEC,aAAa,EAAE;QACpC,IAAI,CAACD,YAAY,CAACC,aAAa,CAACC,SAAS,GAAG,IAAI,CAACF,YAAY,CAACC,aAAa,CAACE,YAAY;;IAE5F,CAAC,EAAE,GAAG,CAAC;EACT;EAEA;EACAjD,YAAYA,CAAC3B,MAAW;IACtB,OAAOA,MAAM,KACVA,MAAM,CAACC,gBAAgB,IAAID,MAAM,CAACC,gBAAgB,CAACO,MAAM,GAAG,CAAC,IAC7DR,MAAM,CAACE,gBAAgB,IAAIF,MAAM,CAACE,gBAAgB,CAACM,MAAM,GAAG,CAAE,IAC9DR,MAAM,CAACG,eAAe,IAAIH,MAAM,CAACG,eAAe,CAACK,MAAM,GAAG,CAAE,CAC9D;EACH;;;uBAvJWwB,aAAa,EAAAlD,EAAA,CAAA+F,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAjG,EAAA,CAAA+F,iBAAA,CAAAG,EAAA,CAAAC,YAAA;IAAA;EAAA;;;YAAbjD,aAAa;MAAAkD,SAAA;MAAAC,SAAA,WAAAC,oBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;;UCPtBvG,EAHJ,CAAAC,cAAA,aAA4B,aAED,SACnB;UAAAD,EAAA,CAAAI,MAAA,uCAAsB;UAAAJ,EAAA,CAAAG,YAAA,EAAK;UAG3BH,EAFJ,CAAAC,cAAA,aAA0B,eACI,eACwB;UAA3BD,EAAA,CAAAyG,gBAAA,2BAAAC,sDAAAC,MAAA;YAAA3G,EAAA,CAAAgC,aAAA,CAAA4E,GAAA;YAAA5G,EAAA,CAAA6G,kBAAA,CAAAL,GAAA,CAAA9C,YAAA,EAAAiD,MAAA,MAAAH,GAAA,CAAA9C,YAAA,GAAAiD,MAAA;YAAA,OAAA3G,EAAA,CAAAqC,WAAA,CAAAsE,MAAA;UAAA,EAA0B;UAAjD3G,EAAA,CAAAG,YAAA,EAAkD;UAACH,EAAA,CAAAI,MAAA,2BACrD;UAAAJ,EAAA,CAAAG,YAAA,EAAQ;UACRH,EAAA,CAAAC,cAAA,gBAAgD;UAAtBD,EAAA,CAAA8B,UAAA,mBAAAgF,+CAAA;YAAA9G,EAAA,CAAAgC,aAAA,CAAA4E,GAAA;YAAA,OAAA5G,EAAA,CAAAqC,WAAA,CAASmE,GAAA,CAAAf,SAAA,EAAW;UAAA,EAAC;UAACzF,EAAA,CAAAI,MAAA,iBAAU;UAE9DJ,EAF8D,CAAAG,YAAA,EAAS,EAC/D,EACF;UAGNH,EAAA,CAAAC,cAAA,iBAAyC;UAUvCD,EARA,CAAAsB,UAAA,KAAAyF,6BAAA,iBAAiD,KAAAC,6BAAA,oBAW5B;UAsFvBhH,EAAA,CAAAG,YAAA,EAAM;UAIJH,EADF,CAAAC,cAAA,eAAkC,uBAOrB;UAJTD,EAAA,CAAAyG,gBAAA,2BAAAQ,0DAAAN,MAAA;YAAA3G,EAAA,CAAAgC,aAAA,CAAA4E,GAAA;YAAA5G,EAAA,CAAA6G,kBAAA,CAAAL,GAAA,CAAAhD,SAAA,EAAAmD,MAAA,MAAAH,GAAA,CAAAhD,SAAA,GAAAmD,MAAA;YAAA,OAAA3G,EAAA,CAAAqC,WAAA,CAAAsE,MAAA;UAAA,EAAuB;UACvB3G,EAAA,CAAA8B,UAAA,2BAAAoF,0DAAAP,MAAA;YAAA3G,EAAA,CAAAgC,aAAA,CAAA4E,GAAA;YAAA,OAAA5G,EAAA,CAAAqC,WAAA,CAAiBmE,GAAA,CAAAnB,gBAAA,CAAAsB,MAAA,CAAwB;UAAA,EAAC;UAI5C3G,EAAA,CAAAI,MAAA;UAAAJ,EAAA,CAAAG,YAAA,EAAW;UACXH,EAAA,CAAAC,cAAA,kBAGmB;UAFjBD,EAAA,CAAA8B,UAAA,mBAAAqF,gDAAA;YAAAnH,EAAA,CAAAgC,aAAA,CAAA4E,GAAA;YAAA,OAAA5G,EAAA,CAAAqC,WAAA,CAASmE,GAAA,CAAArC,WAAA,EAAa;UAAA,EAAC;UAGvBnE,EAAA,CAAAI,MAAA,IACF;UAEJJ,EAFI,CAAAG,YAAA,EAAS,EACL,EACF;;;UA7HyBH,EAAA,CAAAK,SAAA,GAA0B;UAA1BL,EAAA,CAAAoH,gBAAA,YAAAZ,GAAA,CAAA9C,YAAA,CAA0B;UAS/C1D,EAAA,CAAAK,SAAA,GAAe;UAAfL,EAAA,CAAAiB,UAAA,SAAAuF,GAAA,CAAA/C,SAAA,CAAe;UAQIzD,EAAA,CAAAK,SAAA,EAAW;UAAXL,EAAA,CAAAiB,UAAA,YAAAuF,GAAA,CAAAjD,QAAA,CAAW;UA+FlCvD,EAAA,CAAAK,SAAA,GAAuB;UAAvBL,EAAA,CAAAoH,gBAAA,YAAAZ,GAAA,CAAAhD,SAAA,CAAuB;UAQvBxD,EAAA,CAAAK,SAAA,GAA2C;UAA3CL,EAAA,CAAAiB,UAAA,cAAAuF,GAAA,CAAAhD,SAAA,CAAAY,IAAA,MAAAoC,GAAA,CAAA/C,SAAA,CAA2C;UAE3CzD,EAAA,CAAAK,SAAA,EACF;UADEL,EAAA,CAAAY,kBAAA,MAAA4F,GAAA,CAAA/C,SAAA,uCACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}